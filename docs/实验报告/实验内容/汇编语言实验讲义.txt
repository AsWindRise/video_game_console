
                   实验一  熟悉汇编过程及应用DEBUG调试程序
实验目的：
熟悉汇编语言的编辑、汇编、链接、运行与调试的全过程
掌握Masm for Windows 集成开发软件的应用
实验内容：
1.汇编过程举例：
1）建立源程序文件：HELLO.ASM
DATAS  SEGMENT
     STRING  DB  'Hello World!',13,10,'$'
DATAS  ENDS

CODES  SEGMENT
     ASSUME    CS:CODES,DS:DATAS
START:
     MOV  AX,DATAS
     MOV  DS,AX
     LEA  DX,STRING
     MOV  AH,9
     INT  21H
     MOV  AH,4CH
     INT  21H
CODES  ENDS
    END   START

2）汇编源程序文件(菜单运行/编译成目标文件OBJ）

由编辑程序建立的HELLO.ASM文件是文本文件，不能在计算机上运行。需要经过汇编程序
的汇编，将其转化为目标代码文件HELLO.OBJ

3）连接目标文件(菜单运行/生成可执行文件EXE)

目标文件是浮动的相对地址，不能直接执行。必须调用连接程序LINK，将目标文件与指
定的库文件连接在一起，构成统一的编址，产生可执行文件HELLO.EXE。

4）运行可执行文件(菜单运行/运行）
   屏幕上输出：Hello World!

5）调试可执行文件(菜单运行/调试）
   调用DEBUG调试程序。DEBUG是MS-
DOS本身所带的动态调试程序，是调试汇编语言的有力工具。
   DEBUG命令：
（1）R命令
   用于查看或修改寄存器内容：
   R（回车）
   [pic]
   各标志位状态定义如下：
|标志名  |1       |0       |
|OF      |OV      |NV      |
|DF      |DN      |UP      |
|IF      |EI      |DI      |
|SF      |NG      |PL      |
|ZF      |ZR      |NZ      |
|AF      |AC      |NA      |
|PF      |PE      |PO      |
|CF      |CY      |NC      |

|0771：  |0000    |B87007          |MOV AX,0770  (MOV  AX,DATAS)  |
|CS      |IP      |指令对应机器码  |第一条指令                    |


（2）D命令
   用于显示内存单元的内容，使用格式有下列几种：
   D（回车）      ；从DEBUG初始化时的段和偏移量的地址开始显示


   D 00（回车）   ；显示DS:00地址开始的80H（12[pic]8）个字节内容
   [pic]
   D DS:00 0F（回车） ；显示DS:00到CS:0F地址的内容
   [pic]

（3）E命令
   用于修改存储单元的内容，使用格式有下列几种：
   E DS:00 1 2 3 4 5（回车） ；DS:00开始的5个单元内容改成了1、2、3、4、5
   [pic]
   修改后可使用D命令，查看该地址单元的内容是否被修改。通过D命令查看内存，发现
DS:00-DS:04存放的数据确实修改为1 2 3 4 5.
   [pic]


（4）U命令
   用于对指令码进行反汇编(机器码→符号指令），显示它们的地址、机器码和操作数以
及汇编指令语句，使用格式为：
   U （回车） ；将CS:00地址开始的32个单元内容进行反汇编
   [pic]


   |0771：   |0000       |B87007         |MOV AX,0770  (MOV          |
|         |           |               |AX,DATAS)                  |
|CS（段基 |IP（偏移地 |指令对应机器码 |符号指令                   |
|址）     |址）       |               |                           |


   U 10 6（回车） ；将CS:10地址开始的6个单元内容进行反汇编


T命令
   用于逐条指令跟踪，使用格式为：
   T（回车）从当前的CS:IP开始执行，执行完一条指令停下来
   [pic]
   T (=CS:IP)(n)（回车） 从指定CS:IP开始执行，执行完n条指令停下来


G命令
   G                           (CS1:IP1)                           （回车）
从当前的CS:IP开始执行。后面的地址CS1:IP1为断点地址，当指令执行到断点时，就停
止执行并显示当前所有寄存器及标志位的内容，和下一条将要执行的指令。
   [pic]
   [pic]


（7）Q命令
   用于退出DEBUG管理，返回DOS，使用格式为：
     Q（回车）


2.编程实现如下功能并通过DEBUG对程序进行调试：
通过键盘输入一个0-9之间的数X，利用加法指令和移位指令完成：
（1）X*2
（2）X*4
（3）X*10
三、实验预习
1、复习教材中有关算数操作与移位操作类指令的功能、格式。
2、画出编程流程图，并按实验内容要求编写汇编语言源程序，程序加上注释。
四、实验步骤
1、建立汇编语言源程序，并汇编、链接、生成*,exe文件。
2、进入 DEBUG，对exe文件进行调试
3、在BUF单元预置一个有符号数X，BUF1存放X*2，BUF2存放X*4，BUF3存放X*10用G命令
运行程序，通过D命令查看内存，记下程序运行后BUF1、BUF2及BUF3单元的内容，并分析
。
4.用T命令运行程序,记下执行每条指令后IP的内容和下一条要执行的指令,以及每一次执
行指令后寄存器，内存单元数据变化情况。

五、实验报告要求：
1. 画出程序流程图并编写源程序，并给程序加上注释；
2. 上机完成程序的编辑、连接以及调试，记录此过程中出现的问题；
3. 调试程序，记录调试过程中内存数据存放情况。



                      实验二 分支结构与循环结构程序设计
一、实验目的：
1、掌握分支程序与循环程序设计与调试方法
2、掌握转移类指令的应用方法
二、实验内容：
1.编程实现如下功能：
设有3个字节型无符号数存放在变量x，y，z中，编写程序找出三个数的中间值（既不是
最大也不是最小的），将其存入变量media中。
2.编程实现如下功能：
从键盘输入不多于10个字符，统计字符‘a’出现的次数，并在屏幕上输出统计结果。
三、实验预习
复习教材中有关转移类指令的功能、格式，以及分支结构程序与循环结构程序的设计方
法；
画出编程流程图，并按实验内容要求编写汇编语言源程序，程序加上注释。
四、实验步骤
1、建立汇编语言源程序，并汇编、链接、生成*,exe文件。
2、进入 DEBUG，对exe文件进行调试
3、用T命令运行程序,记下执行每条指令后IP的内容和下一条要执行的指令,以及每一次
执行指令后寄存器，内存单元数据变化情况，特别注意比较指令与跳转指令执行后程序
的走向。

五、实验报告要求：
1、画出程序流程图并编写源程序，并给程序加上注释；
2、上机完成程序的编辑、连接以及调试，记录此过程中出现的问题；
3、调试程序，记录调试过程中内存数据存放情况。




