#ifndef __ROCKER_ADC_DRIVER_H__
#define __ROCKER_ADC_DRIVER_H__

// 引入全局配置头文件，确保具备标准类型和HAL库等依赖
#include "mydefine.h"

// -----------------------------------------------------------------------------
// 1. 宏定义 (配置参数)
// -----------------------------------------------------------------------------

/**
 * @brief DMA 缓冲区大小 (Word 数)。
 * 职责：定义用于存储 ADC1 (X) 和 ADC2 (Y) 原始采样数据的总内存单元数量。
 * 注意：该值必须是偶数，因为 X 和 Y 的数据是交错存储的。
 */
#define ROCKER_DMA_BUFFER_SIZE 128


// -----------------------------------------------------------------------------
// 2. 数据结构定义
// -----------------------------------------------------------------------------

/**
 * @brief 摇杆原始数据结构体。
 * 职责：存储从 DMA 缓冲区中计算或提取的最新摇杆 X/Y 原始 ADC 值。
 */
typedef struct
{
    uint32_t x_raw_value; /*!< X 轴（ADC1）的最新原始值 (0-4095)。 */
    uint32_t y_raw_value; /*!< Y 轴（ADC2）的最新原始值 (0-4095)。 */
} rocker_data_t;


// -----------------------------------------------------------------------------
// 3. 驱动 API 声明
// -----------------------------------------------------------------------------

/**
 * @brief 摇杆 ADC 驱动初始化函数。
 * 职责：启动 TIM3、ADC1/ADC2 硬件，并启动双 DMA 循环传输。
 */
void rocker_adc_driver_init(void);

/**
 * @brief 获取最新的摇杆原始 ADC 值。
 * 职责：从 DMA 缓冲区中提取或计算最新的 X/Y 原始读数。
 * @return rocker_data_t: 包含 X 和 Y 原始值的结构体。
 */
rocker_data_t rocker_adc_get_raw_value(void);


#endif // __ROCKER_ADC_DRIVER_H__

/**
 * @brief 澶浠诲★瀹璋锛
 * @note  寤鸿10msㄦ璋
 */
void rocker_process_task(void);

