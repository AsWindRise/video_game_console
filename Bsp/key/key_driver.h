#ifndef __KEY_DRIVER_H__
#define __KEY_DRIVER_H__

// 引入全局配置头文件，确保所有标准类型和 HAL 库宏定义可用
#include "mydefine.h" 


// -----------------------------------------------------------------------------
// 1. 全局状态变量声明 (供应用层访问按键状态)
// -----------------------------------------------------------------------------

// key_val: 实时键值 (0 或 1-6)
// key_up:  按键抬起捕捉 (上升沿)
// key_down:按键按下捕捉 (下降沿)
extern uint8_t key_val, key_up, key_down, key_old;


// -----------------------------------------------------------------------------
// 2. 函数原型声明
// -----------------------------------------------------------------------------

/**
 * @brief 读取当前所有按键的状态值。
 * @return uint8_t: 当前按下的按键编号 (1-6)，或 0 (无按键)。
 */
uint8_t key_read(void);

/**
 * @brief 按键扫描任务。
 * 职责：在调度器中周期性运行，更新按键状态和边缘捕捉。
 */
void key_task(void);


#endif // __KEY_DRIVER_H__
